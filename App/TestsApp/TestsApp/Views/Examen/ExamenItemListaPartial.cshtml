@model TestsApp.Models.Examen
@{DateTime fechaActual = DateTime.Now;
  TestsApp.App_Code.Helper helperObj = new TestsApp.App_Code.Helper();}
<div class="article">
    <div class="post-info">
        @helperObj.ReturnTextDifferenceNow(Model.FechaCreacion)
    </div>
    <div class="post-content-preview">
        <h3>
            @Model.Titulo
        </h3>
        @if (Model.IdTipo != 2)
        {
            <p>Línea: @Model.Producto.Linea.Nombre</p>
            <p>Producto: @Model.Producto.Nombre</p>
            <p>
                Fecha de ejecución: @Model.FechaEjecucion.Value.Day de @Model.FechaEjecucion.Value.ToString("MMMM") del @Model.FechaEjecucion.Value.Year
            </p>
        }
    </div>

    <div class="article-actions">
        @if (Model.IdTipo != 2)
        {

            if (User.IsInRole("Administrador"))
            {
                if (Model.IdEstado == 1)
                {
            @Html.ActionLink("Editar", "Create", new { id = Model.Id }, new { @class = "btn btn-mini light-blue inverse" })
            @Ajax.ActionLink("Publicar", "Publish", new { id = Model.Id }, new AjaxOptions { UpdateTargetId = "modal-publicar-examen", OnSuccess = "showModalPublish" }, new { @class="btn btn-mini dark-blue"})
                }
                if (Model.IdEstado == 3)
                {
            <a class="btn btn-mini medium-blue open-modal-asignarAster" data-id="@Model.Id">Aprobar</a>
                }
            }
            if (Model.IdEstado == 3)
            {
                if (Model.FechaEjecucion.Value.Date == DateTime.Now.Date)
                {
            @Html.ActionLink("Dar", "Give", new { id = Model.Id }, new { @class = "btn btn-mini light-blue inverse" })
                }
                else
                {
            <button type="button" class="btn btn-mini btn-dar-disabled" disabled title="ASDasdasd">Dar</button>
                }
            }

        }
        else
        {
            @Html.ActionLink("Tomar", "Give", new { id = Model.Id }, new { @class = "btn btn-mini light-blue inverse" })
        }
    </div>
</div>

